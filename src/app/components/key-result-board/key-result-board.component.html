
<div class="widget align-middle ">
  <div class="flex justify-between">
      <div class="flex justify-between py-2 px-2 mb-2">
        <svg xmlns="http://www.w3.org/2000/svg" width="49" height="43" viewBox="0 0 49 43">
          <g id="Group_32" data-name="Group 32" transform="translate(202 -58.387)">
            <path id="Rectangle_34" data-name="Rectangle 34" d="M8,0h8a0,0,0,0,1,0,0V13a0,0,0,0,1,0,0H0a0,0,0,0,1,0,0V8A8,8,0,0,1,8,0Z" transform="translate(-202 58.387)" fill="#ee6f3b"/>
            <rect id="Rectangle_37" data-name="Rectangle 37" width="16" height="13" transform="translate(-202 73.387)" fill="#ee6f3b"/>
            <path id="Rectangle_39" data-name="Rectangle 39" d="M0,0H16a0,0,0,0,1,0,0V13a0,0,0,0,1,0,0H8A8,8,0,0,1,0,5V0A0,0,0,0,1,0,0Z" transform="translate(-202 88.387)" fill="#ee6f3b"/>
            <path id="Rectangle_35" data-name="Rectangle 35" d="M0,0H23a8,8,0,0,1,8,8v5a0,0,0,0,1,0,0H0a0,0,0,0,1,0,0V0A0,0,0,0,1,0,0Z" transform="translate(-184 58.387)" fill="#ee6f3b"/>
            <rect id="Rectangle_36" data-name="Rectangle 36" width="31" height="13" transform="translate(-184 73.387)" fill="#ee6f3b"/>
            <path id="Rectangle_38" data-name="Rectangle 38" d="M0,0H31a0,0,0,0,1,0,0V5a8,8,0,0,1-8,8H0a0,0,0,0,1,0,0V0A0,0,0,0,1,0,0Z" transform="translate(-184 88.387)" fill="#ee6f3b"/>
          </g>
        </svg>

          <h2 class="bg-white text-black font-bold py-2 px-4 rounded inline-flex items-center text-2xl">Key Result Board</h2>
      </div>
      <div class="flex justify-between py-2 px-2 mr-2 items-center">

        <div class="dropdown inline-block relative w-40">
          <button class="bg-white text-black font-semibold py-3 px-4 rounded inline-flex items-center text-base">
            <span class="pr-1 text-sm text-gray-400 ">Time <strong class=" text-sm text-gray-700 ml-2">{{choosenTimeFilter}}</strong> </span>
            <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/> </svg>
          </button>
          <ul class="dropdown-menu absolute hidden text-gray pt-1 w-full bg-gray-100">
            <li class=""><a (click)="changeTimeFilter('All Times')" class=" hover:bg-gray-200 py-2 px-4 block whitespace-nowrap w-100 ">All Times</a></li>
            <li class=""><a (click)="changeTimeFilter('Weekly')" class=" hover:bg-gray-200 py-2 px-4 block whitespace-nowrap w-100">Weekly</a></li>
            <li class=""><a (click)="changeTimeFilter('Monthly')" class=" hover:bg-gray-200 py-2 px-4 block whitespace-nowrap w-100">Monthly</a></li>
            <li class=""><a (click)="changeTimeFilter('Yearly')" class=" hover:bg-gray-200 py-2 px-4 block whitespace-nowrap w-100">Yearly</a></li>

          </ul>
        </div>
        <div class="dropdown inline-block relative w-48">
          <button class="bg-white text-black font-semibold py-3 px-4 rounded inline-flex items-center text-base">
            <span class="pr-1 text-sm text-gray-400 ">Filter <strong class="ml-2 text-sm text-gray-700">{{choosenFilter}}</strong> </span>
            <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/> </svg>
          </button>
          <ul class="dropdown-menu absolute hidden text-gray pt-1 w-full bg-gray-100">
            <li class=""><a (click)="changeFilter('Completed')" class=" hover:bg-gray-200 py-2 px-4 block whitespace-nowrap w-100" routerLink="/key-result-board">Completed</a></li>
            <li class=""><a (click)="changeFilter('On Board')" class=" hover:bg-gray-200 py-2 px-4 block whitespace-nowrap w-100" routerLink="/key-result-board">On Board</a></li>
          </ul>
        </div>


        <svg xmlns="http://www.w3.org/2000/svg" width="23" height="5" viewBox="0 0 23 5">
          <g id="Group_6" data-name="Group 6" transform="translate(-90 1910) rotate(-90)">
            <circle id="Ellipse_1" data-name="Ellipse 1" cx="2.5" cy="2.5" r="2.5" transform="translate(1905 90)"/>
            <circle id="Ellipse_2" data-name="Ellipse 2" cx="2.5" cy="2.5" r="2.5" transform="translate(1905 99)"/>
            <circle id="Ellipse_3" data-name="Ellipse 3" cx="2.5" cy="2.5" r="2.5" transform="translate(1905 108)"/>
          </g>
        </svg>

      </div>
  </div>
  <div class="flex flex-col">
      <div class="px-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
        <div class="py-2 inline-block min-w-full sm:px-6 lg:px-8">
          <div class="overflow-hidden">
            <table class="min-w-full">
              <thead class="border-b">
                <tr>
                  <th scope="col" class="text-sm text-gray-400 px-6 py-2 text-left">
                    Key Result
                  </th>
                  <th scope="col" class="text-sm text-gray-400 px-6 py-2 text-left">
                    Start
                  </th>
                  <th scope="col" class="text-sm text-gray-400 px-6 py-2 text-left">
                    Target
                  </th>
                  <th scope="col" class="text-sm text-gray-400 px-6 py-2 text-left">
                    Current
                  </th>
                  <th scope="col" class="text-sm text-gray-400 px-6 py-2 text-left">
                      Check-in Progress
                  </th>
                  <th scope="col" class="text-sm text-gray-400 px-6 py-2 text-left">
                      Owners
                  </th>
                  <th scope="col" class="text-sm text-gray-400 px-6 py-2 text-left">
                      Last Check-in
                  </th>
                </tr>
              </thead>
              <tbody>

                <ng-container *ngFor="let item of this.array.data">

                <tr class="border-b-2">
                  <td class="px-6 py-4 whitespace-nowrap text-base font-medium text-gray-900">{{item.key_result}}</td>
                  <td class="text-base text-gray-900 font-medium px-6 py-4 whitespace-nowrap">
                    {{this.formatNumberService.formatNumber(item.start)}}
                  </td>
                  <td class="text-base text-gray-900 font-medium px-6 py-4 whitespace-nowrap">
                    {{this.formatNumberService.formatNumber(item.target)}}
                  </td>
                  <td class="text-base text-gray-900 font-medium px-6 py-4 whitespace-nowrap"  >
                    <div class="flex items-center">
                    <svg class="mr-2" ngClass="{{item.checkin_progress.slice().reverse()[0].this_week.numeric < 20 ? 'text-red-500' : item.checkin_progress.slice().reverse()[0].this_week.numeric > 70 ? 'text-orange-300' : 'text-green'}}" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                      <rect id="Rectangle_9" data-name="Rectangle 9" width="20" height="20" rx="3" fill="currentColor"/>
                    </svg>
                    {{this.formatNumberService.formatNumber(item.checkin_progress.slice().reverse()[0].this_week.numeric)}}
                  </div>
                  </td>
                  <td class="text-base text-gray-900 font-medium py-4 whitespace-nowrap ">
                      <div class="overflow-x-scroll space-x-2 py-2 w-11/12">
                        <ng-container *ngFor="let item1 of item.checkin_progress">
                          <span class=" py-1 px-3 rounded-lg greenSpan" ngClass="{{item1.this_week.numeric < 20 ? 'bg-red-500' : item1.this_week.numeric > 70 ? 'bg-orange-300' : 'bg-green'}}">
                              {{this.formatNumberService.formatNumber(item1.this_week.numeric)}}
                          </span>
                          <div #tooltipContainer  class="bg-white p-2 rounded-lg shadow-md absolute tooltip hidden">
                            <app-tooltip [data]="item1" #tooltip></app-tooltip>
                          </div>
                        </ng-container>

                      </div>
                  </td>

                  <td class="text-base text-gray-900 font-medium px-6 whitespace-nowrap">

                      <div class="flex overflow-hidden" id="avatar-container" >
                        <ng-container *ngFor="let item2 of item.owners" >
                          <img *ngIf="this.countAvatar(item.owners)" class="inline-block h-6 w-6 rounded-full ring-2 ring-white" src={{item2.avatar}} alt="">
                        </ng-container>

                        <ng-container *ngIf="this.countAvatar(item.owners) === false">
                        <img  class="inline-block h-6 w-6 rounded-full ring-2 ring-white" src={{item.owners[0].avatar}} alt="">
                          <img class="inline-block h-6 w-6 rounded-full ring-2 ring-white" src={{item.owners[1].avatar}} alt="">
                          <img class="inline-block h-6 w-6 rounded-full ring-2 ring-white" src={{item.owners[2].avatar}} alt="">
                          <p class="ml-2">+{{item.owners.length-3}}</p>
                        </ng-container >
                      </div>
                  </td>
                  <td class="text-base text-gray-900 font-medium px-6 py-4 whitespace-nowrap">
                      {{this.formatNumberService.formatNumber(item.checkin_progress.slice().reverse()[0].this_week.numeric)}}->{{this.formatNumberService.formatNumber(item.checkin_progress.slice().reverse()[1].this_week.numeric)}}
                  </td>
                </tr>
              </ng-container>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
</div>
